define(["exports","metal-dom/src/all/dom","../globals/globals","metal/src/metal","metal-uri/src/Uri"],function(e,t,r,n,u){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=a(r),l=a(u),f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function(){function e(){o(this,e)}return f(e,null,[{key:"copyNodeAttributes",value:function(e,t){Array.prototype.slice.call(e.attributes).forEach(function(e){return t.setAttribute(e.name,e.value)})}},{key:"getAbsoluteHref",value:function(e){var r=i["default"].document.createElement("a");r.setAttribute("href",e);var n=r.href;return(0,t.exitDocument)(r),n}},{key:"getCurrentBrowserPath",value:function(){return this.getCurrentBrowserPathWithoutHash()+i["default"].window.location.hash}},{key:"getCurrentBrowserPathWithoutHash",value:function(){return i["default"].window.location.pathname+i["default"].window.location.search}},{key:"getNodeOffset",value:function(e){var t=0,r=0;do t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e);return{offsetLeft:t,offsetTop:r}}},{key:"getUrlPath",value:function(e){var t=new l["default"](e);return t.getPathname()+t.getSearch()+t.getHash()}},{key:"getUrlPathWithoutHash",value:function(e){var t=new l["default"](e);return t.getPathname()+t.getSearch()}},{key:"getUrlPathWithoutHashAndSearch",value:function(e){var t=new l["default"](e);return t.getPathname()}},{key:"getHref",value:function(t){return(0,n.isObject)(t)&&"[object SVGAnimatedString]"===t.toString()?e.getAbsoluteHref(t.animVal):t}},{key:"isCurrentBrowserPath",value:function(t){if(t){var r=this.getCurrentBrowserPathWithoutHash();return e.getUrlPathWithoutHash(t)===this.getUrlPath(r)}return!1}},{key:"isHtml5HistorySupported",value:function(){return!(!i["default"].window.history||!i["default"].window.history.pushState)}},{key:"isWebUri",value:function(e){try{return new l["default"](e)}catch(t){return!1}}},{key:"clearNodeAttributes",value:function(e){Array.prototype.slice.call(e.attributes).forEach(function(t){return e.removeAttribute(t.name)})}},{key:"removeElementsFromDocument",value:function(e){e.forEach(function(e){return(0,t.exitDocument)(e)})}},{key:"removePathTrailingSlash",value:function(e){var t=e?e.length:0;return t>1&&"/"===e[t-1]&&(e=e.substr(0,t-1)),e}},{key:"setElementWithRandomHref",value:function(e){return e.href=e.href+"?q="+Math.random(),e}},{key:"setReferrer",value:function(e){Object.defineProperty(i["default"].document,"referrer",{configurable:!0,get:function(){return e}})}}]),e}();e["default"]=c});